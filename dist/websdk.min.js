!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.websdk=e():t.websdk=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";var r=n(1);e.a=class{constructor(){this.__uuid=Object(r.g)()}get uuid(){return this.__uuid}}},function(t,e,n){"use strict";e.g=function(){return++r},e.c=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.d=function(t){return t=t.toString(16),`#${t="000000".substr(0,6-t.length)+t}`},e.f=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)};let r=0;e.e=function(){return window.performance?window.performance.now()/1e3:Date.now()/1e3};e.b=function(t,e){if(t.fill)t.fill(e);else for(var n=0;n<t.length;n++)t[n]=e};e.a=function(t){const e=t.subarray(0,10);return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}},function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return r.a});var s=n(3);n.d(e,"c",function(){return s.a});var i=n(7);n.d(e,"b",function(){return i.a});var o=n(4);n.d(e,"d",function(){return o.a})},function(t,e,n){"use strict";var r=n(0);class s extends r.a{constructor(t,e,n){super(),this._listener=t,this._callback=e,this._key=n}call(){this._callback&&this._callback.call(arguments)}apply(t,e){this._callback&&this._callback.apply(this._listener||t,e)}same(t){return t instanceof s&&this._listener===t.listener&&this._key===t.key&&this._callback===t.callback}get callback(){return this._callback}get listener(){return this._listener}get key(){return this._key}}e.a=s},function(t,e,n){"use strict";var r=n(0),s=n(3);class i{constructor(){this.delay=0,this.repeat=!1,this.userFrame=!1,this.exeTime=(new Date).getTime(),this.method=null,this.args=null,this.count=0}clear(){this.method=null,this.args=null}}const o=100;var a=null;class l extends r.a{constructor(t){super(),this._handlers=new Map,this._pool=[],this._currTimer=(new Date).getTime(),this._currFrame=0,this._size=0,this._runtime=null,this._userFrame=t||!1}start(){this._startAnimationFrame()}stop(){this._stopAnimationFrame()}destroy(){this._stopAnimationFrame(),this._currFrame=0,this.clearALL(),this._pool=[]}clearALL(){for(let t of this._handlers.values())t.clear(),t=null;this._handlers.clear()}clearTimer(t){if(!this._handlers.has(t))return;let e=this._handlers.get(t);e&&(e.clear(),this._pool.push(e),--this._size),this._handlers.delete(t)}doOnce(t,e,n,r,s){return n=n||null,r=r||null,this._create(!1,!1,t,this._createHandler(r,e,s),1,n)}doCount(t,e,n,r,s,i){return r=r||null,s=s||null,this._create(!1,!0,t,this._createHandler(s,e,i),n,r)}doLoop(t,e,n,r,s){return n=n||null,r=r||null,this._create(!1,!0,t,this._createHandler(r,e,s),0,n)}doFrameOnce(t,e,n,r,s){return n=n||null,r=r||null,this._create(!0,!1,t,this._createHandler(r,e,s),1,n)}doFrameCount(t,e,n,r,s,i){return r=r||null,s=s||null,this._create(!0,!0,t,this._createHandler(s,e,i),n,r)}doFrameLoop(t,e,n,r,s){return n=n||null,r=r||null,this._create(!0,!0,t,this._createHandler(r,e,s),0,n)}get size(){return this._size}hasTimer(t){return t&&this._handlers.has(t)}_requestAnimationFrame(t){return(this._userFrame?function(t){let e,n=window.requestAnimationFrame,r=0,s=["webkit","moz"],i=0;for(;i<s.length&&!n;++i)n=window[s[i]+"RequestAnimationFrame"];return n||(n=function(t){let e=(new Date).getTime(),n=Math.max(0,16-(e-r)),s=window.setTimeout(function(){t&&t(e+n)},n);return r=e+n,s}),function r(s){t(s),e=n(r)}(),e}:setInterval)(t,o)}_cancelAnimationFrame(t){(this._userFrame?function(t){let e=window.cancelAnimationFrame,n=["webkit","moz"],r=0;for(r=0;r<n.length&&!e;++r)e=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];e||(e=function(t){clearTimeout(t)}),e&&e(t)}:clearTimeout)(t)}_stopAnimationFrame(){this._runtime&&(this._cancelAnimationFrame(this._runtime),this._runtime=null)}_startAnimationFrame(){if(!this._runtime&&this._handlers.size>0){let t=this;this._runtime=this._requestAnimationFrame(e=>{t._onEnterFrame(e)})}}_onEnterFrame(){++this._currFrame,this._currTimer=(new Date).getTime(),this._handlers.forEach((t,e)=>{if(t){let n=t.userFrame?this._currFrame:this._currTimer,r=t.method;if(r&&n>=t.exeTime){let s=t.args;if(t.repeat)for(;n>=t.exeTime;)t.exeTime+=t.delay,t.count>0&&0==--t.count&&this.clearTimer(e),r.apply(null,s);else this.clearTimer(e),r.apply(null,s)}}}),this._handlers.size<=0&&this._stopAnimationFrame()}_create(t,e,n,r,s,o){if(o=o||null,null===r)return null;if((!e||e<2)&&n<1)return r.apply(null,o),-1;let a=r.uuid;a===r.key&&this.clearTimer(a),this._currTimer=(new Date).getTime();let l=this._pool.length>0?this._pool.pop():new i;return l.userFrame=t,l.repeat=e,l.delay=n,l.method=r,l.count=s,l.args=o,l.exeTime=n+(t?this._currFrame:this._currTimer),this._handlers.set(a,l),++this._size,this._startAnimationFrame(),a}_createHandler(t,e,n){let r=this._handlers.get(n);return r&&r.method||new s.a(t,e,n)}static get impl(){return a||(a=new l).start(),a}}e.a=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6);n.d(e,"WebSdk",function(){return r.a});var s=n(2);n.d(e,"Base",function(){return s.a}),n.d(e,"Handler",function(){return s.c}),n.d(e,"Dispatch",function(){return s.b}),n.d(e,"Timers",function(){return s.d});var i=n(1);n.d(e,"uuid",function(){return i.g}),n.d(e,"hex2rgb",function(){return i.c}),n.d(e,"hex2string",function(){return i.d}),n.d(e,"rgb2hex",function(){return i.f}),n.d(e,"now",function(){return i.e}),n.d(e,"fill",function(){return i.b}),n.d(e,"buf2hex",function(){return i.a})},function(t,e,n){"use strict";var r=n(2);class s{constructor(){this._root={},this._env=s.WEB,this._dev=!1,this._args=null}install(){const t=[];for(var e=0;e<arguments.length;++e)t[e]=arguments[e];this._doMerge(t)}do(t){const e=[];for(var n=1;n<arguments.length;++n)e[n-1]=arguments[n];return this._doInvoke(t,e)}get(t){return this._doGet(t)}set(t,e){return this._doSet(t,e)}on(t,e,n){return this._doOn(t,e,n)}off(t,e,n){return this._doOn(t,e,n,!0)}get dev(){return this._dev}get env(){return this._env}get args(){if(!this._args){var t=(location.search||location.href||"").slice(1),e=t.indexOf("?"),n=/([^&]+?)=([^#&]+)/g,r={};for(t=t.substr(e+1);n.test(t);)r[RegExp.$1]=RegExp.$2;this._args=r||{}}return this._args}static get impl(){return s.__impl||(s.__impl=new s)}init({sdk:t,env:e,dev:n}={}){t&&(this._root=t),e&&(this._env=e),this._dev=!!n}destroy(){this._root={}}_doInvoke(t,e){if(!t||!/^([a-zA-Z])/.test(t))return Promise.reject({code:-1,message:`key: ${t} not valid!`});const n=t.replace(/\[/g,".").replace(/\]/g,"").replace(/\//g,".").split(".");if(!n.length)return Promise.reject({code:-2,message:`key: ${t} not allow empty!`});const r=n.pop();for(var s=this._root,i=0;i<n.length;++i){if(!((s=s[n[i]]||null)&&s instanceof Object)){s=null;break}}const o=r&&s&&s[r]||null;if(!o)return Promise.reject({code:-3,message:`method index of key: ${t} is null`});const a=o.apply(s,e);return a instanceof Promise?a:Promise.resolve(a)}_doGet(t){if(!t||!/^([a-zA-Z])/.test(t))return null;const e=t.replace(/\[/g,".").replace(/\]/g,"").replace(/\//g,".").split(".");if(!e.length)return null;const n=e.pop();for(var r=this._root,s=0;s<e.length;++s){if(!((r=r[e[s]]||null)&&r instanceof Object)){r=null;break}}return n&&r&&r[n]||null}_doSet(t,e){if(!t||!/^([a-zA-Z])/.test(t))return null;const n=t.replace(/\[/g,".").replace(/\]/g,"").replace(/\//g,".").split(".");if(!n.length)return null;const r=n.pop();for(var s=this._root,i=0;i<n.length;++i){if(!((s=s[n[i]]||null)&&s instanceof Object)){s=null;break}}return r&&r in s?(s[r]=e,e):null}_doOn(t,e,n,s){if(!t||!/^([a-zA-Z])/.test(t))return!1;const i=t.replace(/\[/g,".").replace(/\]/g,"").replace(/\//g,".").split(".");if(!i.length)return!1;for(var o=this._root,a=0;a<i.length;++a){if(!((o=o[i[a]]||null)&&o instanceof Object)){o=null;break}}return!!(o&&o instanceof r.b)&&(s?o.off(e,n):o.on(e,n),!0)}_doMerge(t){const e=Object.assign||function(t){for(var e=1;e<arguments.length;++e){const r=arguments[e];for(var n in r)t[n]=r[n]}return t};(t=t||[]).unshift(this._root),this._root=e.apply(null,t)}}e.a=s},function(t,e,n){"use strict";var r=n(8),s=n.n(r),i=n(4),o=n(1);class a extends s.a{constructor(){super(),this.stoped=!1,this.uuid=Object(o.g)(),this.later=new Map}emit(){this.stoped||super.emit.apply(this,arguments)}init(){this.emit(a.ONINIT)}start(){this.stoped=!1,this.emit(a.ONSTART)}stop(){this.emit(a.ONSTOP),super.removeAllListeners(),this.stoped=!0}destroy(){this.emit(a.ONDESTROY),this.later.clear(),super.removeAllListeners(),this.stoped=!0}callLater(t,e){if(this.stoped)return;const n=this.later.get(t);this.later.set(t,i.a.impl.doOnce(e||100,t,[],this,n))}removeLater(t){const e=this.later.get(t);e&&i.a.impl.clearTimer(e),this.later.delete(t)}doTick(t,e){return!this.stoped&&i.a.impl.doLoop(e||100,t)||null}removeTick(t){t&&i.a.impl.clearTimer(t)}static get ONINIT(){return"Dispatch.ONINIT"}static get ONSTART(){return"Dispatch.ONSTART"}static get ONSTOP(){return"Dispatch.ONSTOP"}static get ONDESTROY(){return"Dispatch.ONDESTROY"}}e.a=a},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,s="~";function i(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},a.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,o),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,_=c.length;for(u=0;u<_;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(t,e,n){var r=new o(e,n||this),i=s?s+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},a.prototype.once=function(t,e,n){var r=new o(e,n||this,!0),i=s?s+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},a.prototype.removeListener=function(t,e,n,r){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[o]);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||r&&!a[l].once||n&&a[l].context!==n)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new i:delete this._events[o]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=s,a.EventEmitter=a,t.exports=a}])});